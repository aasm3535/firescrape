<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FireScrape Docs</title>
  <link rel="stylesheet" href="/style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="light flex flex-col h-screen overflow-hidden">

  <!-- Navbar -->
  <nav class="navbar bordered shrink-0">
    <a href="/" class="logo">
      <i data-lucide="flame" class="key"></i>
      FireScrape <span class="badge badge-outline ml-2 font-normal text-xs">Docs</span>
    </a>
    <div class="flex gap-2">
      <a href="/playground" class="btn btn-primary btn-sm hidden-xs">
        <span data-i18n="nav_playground">Playground</span>
      </a>
      <button onclick="toggleTheme()" class="btn btn-ghost" aria-label="Toggle Theme">
        <i data-lucide="moon" id="theme-icon" width="16"></i>
      </button>
      <select id="lang-select" onchange="changeLang(this.value)" class="btn btn-outline btn-sm" style="width:auto;">
        <option value="en">EN</option>
        <option value="ru">RU</option>
      </select>
    </div>
  </nav>

  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-content mt-4">
        <div class="nav-group">
          <div class="nav-title" data-i18n="menu_start">Start Here</div>
          <a href="#introduction" class="nav-link active">Introduction</a>
          <a href="#authentication" class="nav-link" data-i18n="link_auth">Authentication</a>
        </div>
        
        <div class="nav-group">
          <div class="nav-title">API Reference</div>
          <a href="#scrape" class="nav-link" data-i18n="link_scrape">Scrape Endpoint</a>
          <a href="#search" class="nav-link" data-i18n="link_search">Search Endpoint</a>
        </div>

        <div class="nav-group">
          <div class="nav-title" data-i18n="menu_guides">Guides</div>
          <a href="#errors" class="nav-link" data-i18n="link_errors">Handling Errors</a>
          <a href="https://github.com/aasm3535/firescrape" target="_blank" class="nav-link">
            GitHub <i data-lucide="external-link" width="12" class="ml-auto"></i>
          </a>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-auto p-6 md:p-12 scroll-smooth" id="main-scroll">
      <div class="max-w-3xl mx-auto">
        
        <section id="introduction" class="mb-12">
          <h1 data-i18n="intro_title">Introduction</h1>
          <p data-i18n="intro_p1">FireScrape is a <b>serverless-first</b> web scraping API designed for modern frontend developers. Unlike traditional scrapers, FireScrape handles the complexity of headless browsers, user-agent rotation, and CAPTCHA detection under the hood.</p>
          <p data-i18n="intro_p2">It is built to run on edge networks (like Vercel) with minimal latency.</p>
          
          <div class="card bg-secondary border-none mt-6">
            <h3 class="text-sm uppercase text-muted-foreground mb-2">Base URL</h3>
            <p class="font-mono text-primary mb-0">https://firescrape-plum.vercel.app</p>
          </div>
        </section>

        <section id="authentication" class="mb-12">
          <h2 data-i18n="auth_title">Authentication</h2>
          <p data-i18n="auth_p1">The API is currently open for public use in beta. No API key is required. However, we enforce rate limits per IP address to ensure fair usage.</p>
        </section>

        <section id="scrape" class="mb-12">
          <h2 data-i18n="scrape_title">Scrape Endpoint</h2>
          <p data-i18n="scrape_p1">Use this endpoint to extract metadata, main content, and hidden structured data (JSON-LD) from any public URL.</p>
          
          <div class="card p-4 flex items-center gap-4 font-mono text-sm mb-6">
            <span class="badge badge-success">GET</span>
            <span>/api/scrape</span>
          </div>

          <h3 data-i18n="lbl_params">Query Parameters</h3>
          <div class="table-container mb-6">
            <table>
              <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
              <tbody>
                <tr>
                  <td><code>url</code></td>
                  <td><code class="key">string</code></td>
                  <td>Yes</td>
                  <td data-i18n="param_url_desc">The target URL to scrape. Must be URL-encoded.</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3 data-i18n="lbl_response">Response Object</h3>
          <pre><span class="key">"success"</span>: <span class="boolean">true</span>,
<span class="key">"data"</span>: {
  <span class="key">"url"</span>: <span class="string">"https://example.com"</span>,
  <span class="key">"meta"</span>: {
    <span class="key">"title"</span>: <span class="string">"Page Title"</span>,
    <span class="key">"description"</span>: <span class="string">"SEO Description..."</span>
  },
  <span class="key">"structured_data"</span>: [ ... ], <span class="muted-foreground">// JSON-LD / Next.js data</span>
  <span class="key">"content_preview"</span>: <span class="string">"Clean text content..."</span>
}</pre>
        </section>

        <section id="search" class="mb-12">
          <h2 data-i18n="search_title">Search Endpoint</h2>
          <p data-i18n="search_p1">Perform a privacy-friendly web search without tracking. Results are returned in clean JSON format.</p>

          <div class="card p-4 flex items-center gap-4 font-mono text-sm mb-6">
            <span class="badge badge-success">GET</span>
            <span>/api/search</span>
          </div>

          <h3 data-i18n="lbl_params">Query Parameters</h3>
          <div class="table-container">
            <table>
              <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
              <tbody>
                <tr>
                  <td><code>q</code></td>
                  <td><code class="key">string</code></td>
                  <td>Yes</td>
                  <td data-i18n="param_q_desc">The search query (e.g. "latest tech news").</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section id="errors" class="mb-12">
          <h2 data-i18n="errors_title">Handling Errors</h2>
          <p>FireScrape uses standard HTTP status codes.</p>
          <div class="table-container">
            <table>
              <thead><tr><th>Code</th><th>Status</th><th>Meaning</th></tr></thead>
              <tbody>
                <tr><td>200</td><td>OK</td><td>Success.</td></tr>
                <tr><td>400</td><td>Bad Request</td><td>Missing <code>url</code> or <code>q</code>.</td></tr>
                <tr><td>403</td><td>Forbidden</td><td>Anti-bot block (Akamai/Cloudflare).</td></tr>
                <tr><td>429</td><td>Too Many Requests</td><td>CAPTCHA detected.</td></tr>
                <tr><td>500</td><td>Server Error</td><td>Internal error.</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <footer class="pt-8 border-t border-border flex justify-between text-sm text-muted-foreground">
          <span>© 2025 FireScrape</span>
          <span>v2.0</span>
        </footer>
      </div>
    </main>
  </div>

  <script>
    lucide.createIcons();
    
    // --- Navigation Logic ---
    document.querySelectorAll('.nav-link').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        if (this.getAttribute('href').startsWith('#')) {
          e.preventDefault();
          document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          const target = document.querySelector(this.getAttribute('href'));
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // --- I18n ---
    const i18n = {
      en: {
        nav_playground: "Playground",
        menu_start: "Start Here",
        menu_guides: "Guides",
        link_auth: "Authentication",
        link_scrape: "Scrape Endpoint",
        link_search: "Search Endpoint",
        link_errors: "Handling Errors",
        
        intro_title: "Introduction",
        intro_p1: "FireScrape is a <b>serverless-first</b> web scraping API designed for modern frontend developers. It handles headless browsers, rotation, and CAPTCHAs.",
        intro_p2: "Built to run on edge networks with minimal latency.",
        
        auth_title: "Authentication",
        auth_p1: "The API is public (beta). No key required, but rate limits apply.",
        
        scrape_title: "Scrape Endpoint",
        scrape_p1: "Extract metadata, content, and hidden structured data (JSON-LD).",
        lbl_params: "Query Parameters",
        lbl_response: "Response Object",
        param_url_desc: "The target URL to scrape. Must be URL-encoded.",
        
        search_title: "Search Endpoint",
        search_p1: "Privacy-friendly web search without tracking.",
        param_q_desc: "The search query (e.g. 'latest tech news').",
        
        errors_title: "Handling Errors"
      },
      ru: {
        nav_playground: "Песочница",
        menu_start: "Начало",
        menu_guides: "Гайды",
        link_auth: "Аутентификация",
        link_scrape: "Scrape Эндпоинт",
        link_search: "Search Эндпоинт",
        link_errors: "Ошибки",
        
        intro_title: "Введение",
        intro_p1: "FireScrape — это <b>serverless</b> API для веб-скрейпинга. Мы берем на себя работу с headless-браузерами, ротацией и капчей.",
        intro_p2: "Создан для работы в Edge-сетях с минимальной задержкой.",
        
        auth_title: "Аутентификация",
        auth_p1: "API публичен (бета). Ключ не нужен, но действуют лимиты.",
        
        scrape_title: "Scrape Эндпоинт",
        scrape_p1: "Извлекает метаданные, контент и скрытые данные (JSON-LD) по URL.",
        lbl_params: "Параметры",
        lbl_response: "Ответ",
        param_url_desc: "Целевой URL. Должен быть закодирован (URL-encoded).",
        
        search_title: "Search Эндпоинт",
        search_p1: "Приватный поиск в вебе без трекеров.",
        param_q_desc: "Поисковой запрос (напр. 'новости IT').",
        
        errors_title: "Обработка Ошибок"
      }
    };

    function changeLang(lang) {
      const t = i18n[lang] || i18n['en'];
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.innerHTML = t[key];
      });
      document.getElementById('lang-select').value = lang;
      localStorage.setItem('lang', lang);
    }

    // --- Theme Logic ---
    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateThemeIcon();
    }
    
    function updateThemeIcon() {
      const isDark = document.body.classList.contains('dark');
      document.getElementById('theme-icon').setAttribute('data-lucide', isDark ? 'sun' : 'moon');
      lucide.createIcons();
    }

    // --- Init ---
    const savedTheme = localStorage.getItem('theme');
    const sysDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (savedTheme === 'dark' || (!savedTheme && sysDark)) {
      document.body.classList.add('dark');
    }
    updateThemeIcon();

    const savedLang = localStorage.getItem('lang') || (navigator.language || 'en').substring(0, 2);
    if (i18n[savedLang]) changeLang(savedLang);
  </script>
</body>
</html>